<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Linux Tape Drives - My Notes</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Linux Tape Drives";
        var mkdocs_page_input_path = "linuxtapedrives.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> My Notes
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../bacula/">Bacula</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../base64/">Base64</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../bashstuff/">Bash Stuff</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../blueparrot/">Blue Parrot</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../exiftool/">Exiftool</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../fedora_keyring/">Fedora Keyring</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ffmpeg/">FFMEG</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../git/">GiT</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../imagemagick/">ImageMagick</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../js_notes/">JS Notes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../keybase/">Keybase</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../linuxuser/">Linux User Admin</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Linux Tape Drives</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#mt-f-devst0-status">mt -f /dev/st0 status</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#i-started-using-bacula-but-i-am-going-to-keep-the-mt-tape-commands-below-for-future-reference">I started using bacula but I am going to keep the "mt" tape commands below for future reference.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#types-of-tape-devices">Types of tape devices</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#install-the-mt-st-tool-tape-drive-management-tool">Install the mt-st tool (Tape drive management tool)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tape-commands">Tape commands:</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../lvm/">LVM - Linux Volume Manager</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mac_apple/">MAC - Apple</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../markdown/">Markdown</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../luksmount/">Mount LUKS Encrypted Media</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mysql/">MariaDB/MySQL</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../openvpn/">OpenVPN</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../pgp/">PGP</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../rdesktop/">RDesktop</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../se_linux/">SE Linux</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ssh/">SSH</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ms_teams/">MS Teams</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../vi_editor/">VI Editor</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../windows/">Windows</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../x11_forwarding/">X11 Forwarding</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../youtube_dl/">Youtube-dl</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">My Notes</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Linux Tape Drives</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="managing-a-tape-device">Managing a tape device</h1>
<ul>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_storage_devices/managing-tape-devices_managing-storage-devices#tape-commands_managing-tape-devices" title=""> Source: Managing tape devices </a></li>
<li>
<h2 id="mt-f-devst0-status">mt -f /dev/st0 status</h2>
</li>
</ul>
<h4 id="i-started-using-bacula-but-i-am-going-to-keep-the-mt-tape-commands-below-for-future-reference">I started using bacula but I am going to keep the "mt" tape commands below for future reference.</h4>
<pre><code>To run bacula from the command line type: bconsole
You can also run it from Webmin once you get it installed.
The main configuration files for bacula are located in /etc/bacula and /usr/libexec/bacula.
There is a bacula log file located here /var/log/bacula/bacula.log.
If you download the bacula tar.gz package, it contains an example folder that has some pretty good examles that can be modified.
</code></pre>
<h4 id="types-of-tape-devices">Types of tape devices</h4>
<pre><code>The following is a list of the different types of tape devices:
/dev/st0 is a rewinding tape device.
/dev/nst0 is a non-rewinding tape device. Use non-rewinding devices for daily backups.
</code></pre>
<h4 id="install-the-mt-st-tool-tape-drive-management-tool">Install the mt-st tool  (Tape drive management tool)</h4>
<pre><code> Install the mt-st package:
</code></pre>
<pre><code>        dnf -y install mt-st
</code></pre>
<h4 id="tape-commands">Tape commands:</h4>
<p>Erases the entire tape.</p>
<pre><code>        mt -f /dev/st0 erase
</code></pre>
<p>Rewinds the tape device.</p>
<pre><code>        mt -f /dev/st0 rewind
</code></pre>
<p>Switches the tape head to the forward record. Here, n is an optional file count. If a file count is specified, tape head skips n records.</p>
<pre><code>        mt -f /dev/st0 fsf n &lt;--(n is the count (see man mt))
</code></pre>
<p>Switches the tape head to the previous record.</p>
<pre><code>        mt -f /dev/st0 bsfm n
</code></pre>
<p>Switches the tape head to the end of the data.</p>
<pre><code>        mt -f /dev/st0 eod
</code></pre>
<p>Ejects the tape.</p>
<pre><code>        mt -f /dev/st0 eject
</code></pre>
<pre><code>
https://unix.stackexchange.com/questions/564146/simple-tools-to-read-write-tapes-on-linux
We used to store multiple tar archives on a single tape, on Solaris with QIC tapes.

To manage the physical tape, there is the mt(1) command. Specifically, this lets you space forward and back using tape marks, using either absolute or relative numbering. Confusingly, the terminology uses &quot;files&quot; in the sense of multiple sub-files separated by tape marks. A complete tar archive would correspond to a &quot;file&quot;.

The mt command has a binary and a man page on my Linux Mint 18.1. Tapes are pretty non-standard -- some types of deck won't have all the commands, but tapemarks are pretty fundamental.

Standard tape devices usually rewind by default before and after each use, thereby destroying any pre-positioning you do. Typically, each deck has a designator like /dev/rmt0, and an additional device for the same physical unit like /dev/nrmt0 where the n says &quot;no rewind&quot;.

So you embed your append tar command in a script that does something like:

        mt -f /dev/nrmt0 rewind
        mt -f /dev/nrmt0 eod
        tar -f /dev/nrmt0 ...
        mt -f /dev/rmt0 offline

You would need to keep a catalogue of which archives are on which tape and which subfile, and your retrieval would be like:

        mt -f /dev/nrmt0 rewind
        mt -f /dev/nrmt0 fsf 17
        tar -f /dev/nrmt0 ...

Breaking your archives into many smaller sections, and skipping between them, would be a significant optimisation for retrieving small numbers of files.
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../linuxuser/" class="btn btn-neutral float-left" title="Linux User Admin"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../lvm/" class="btn btn-neutral float-right" title="LVM - Linux Volume Manager">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../linuxuser/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../lvm/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
